(function(){function m(c,e,b){"undefined"==typeof b&&(b=e,e={});"undefined"==typeof b&&(b=c,c={});c=c||{};b=b||[];k.b(c,{push:function(a){this.attr(this.length++,a)},pop:function(){var a=this.attr(this.length-1);this.removeAttr(this.length-1);this.length--;return a},shift:function(){var a=Array.prototype.shift.apply(this);this.trigger("remove","0",a,void 0);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);if(1<arguments.length){var g=Array.prototype.slice.call(arguments,
0,arguments.length);this.trigger("add","0",void 0,g)}else 1==arguments.length&&this.trigger("add","0",void 0,arguments[0]);return a},slice:function(a,g){arguments[0]=arguments[0]||0;arguments[1]=arguments[1]||this.length;var b=Array.prototype.slice.apply(this,arguments);return new d.List(b)},splice:function(a,g){arguments[0]=arguments[0]||0;arguments[1]=arguments[1]||this.length;var b=Array.prototype.splice.apply(this,arguments);this.keys=[];for(var c=0;c<this.length;c++)this.keys.push(c);this.trigger("remove",
a,b,void 0);2<arguments.length&&(c=Array.prototype.slice.call(arguments,2,arguments.length),this.trigger("add",a,void 0,c));return new d.List(b)},indexOf:function(){return Array.prototype.indexOf.apply(this,arguments)},join:function(){return Array.prototype.join.apply(this,arguments)},forEach:function(){Array.prototype.forEach.apply(this,arguments)},concat:function(){var a=Array.prototype.slice.call(this,0,this.length);return new d.List(Array.prototype.concat.apply(a,arguments))}});return d.Map.extend(c,
e,{init:function(a){k.b(this,b);this.length=0;if(a instanceof Array){this.length=a.length;for(var g=0;g<a.length;g++)this[g]=a[g]}else if(0<arguments.length)for(this.length=arguments.length,g=0;g<arguments.length;g++)this[g]=arguments[g]}})}function n(c,e,b){"undefined"==typeof b&&(b=e,e={});"undefined"==typeof b&&(b=c,c={});c=c||{};b=b||{};k.b(c,{attr:function(a,g){"number"==typeof a&&(a=String(a));if("undefined"==typeof a){var b={},c;for(c in this.keys)b[this.keys[c]]=this[this.keys[c]];return b}if("string"==
typeof a){if("undefined"==typeof g)return this[a];b="set";0>this.keys.indexOf(a)&&(this.keys.push(a),b="add");var e=this[a];this[a]=g;this.trigger(b,a,e,g)}if("object"==typeof a)for(c in a)b="set",0>this.keys.indexOf(c)&&(this.keys.push(c),b="add"),e=this[c],this[c]=a[c],this.trigger(b,c,e,a[c])},each:function(a){for(var b in this.keys)a.call(this,b,this[b])},removeAttr:function(a){"number"==typeof a&&(a=String(a));var b=this.keys.indexOf(a);0>b||(this.keys.splice(b,1),b=this[a],delete this[a],this.trigger("remove",
a,b,void 0))},bind:function(a,b){f[this.a][a]instanceof Array||(f[this.a][a]=[]);for(var c in f[this.a][a])if(f[this.a][a][c]==b)return;f[this.a][a].push(b)},unbind:function(a,b){if(f[this.a][a]instanceof Array)if("undefined"==typeof b)delete f[this.a][a];else for(var c in f[this.a][a])if(f[this.a][a][c]==b){f[this.a][a].splice(c,1);break}},trigger:function(a,b,c,e){var d=null;if("undefined"!=typeof f[this.a][b])for(var d=new l(a,b,c,e),h=0;h<f[this.a][b].length;h++)if(f[this.a][b][h].call(this,d),
d.stopPropagation)return;if("undefined"!=typeof f[this.a][a])for(d=d||new l(a,b,c,e),h=0;h<f[this.a][a].length;h++)if(f[this.a][a][h].call(this,d),d.stopPropagation)return;if("undefined"!=typeof f[this.a].change)for(d=d||new l("change",b,c,e),h=0;h<f[this.a].change.length&&(f[this.a].change[h].call(this,d),!d.stopPropagation);h++);}});return d.Construct.extend(c,e,{init:function(a){a=a||{};this.keys=[];k.b(a,b);"function"==typeof b.init&&b.init.apply(this,arguments);if("object"==typeof a)for(var c in a)this[c]=
a[c],this.keys.push(c);f.length++;this.a=c="map"+f.length;f[c]={}}})}function l(c,e,b,a){this.how=c;this.key=e;this.old_val=b;this.new_val=a;this.stopPropagation=!1}var d=window.fw||{},k=d.utils||{};k.b=function(c,e){for(var b in e)"undefined"==typeof c[b]&&"init"!=b&&(c[b]=e[b])};d.Construct=function(c,e){return d.Construct.extend({},c,e)};d.Construct.extend=function(c,e,b){function a(){"function"==typeof b.init&&b.init.apply(this,arguments);for(var a in b)"init"!=a&&(this[a]=b[a])}"undefined"==
typeof b&&(b=e,e={});"undefined"==typeof b&&(b=c,c={});c=c||{};b=b||{};a.prototype=c;a.prototype.superclass=c;a.prototype.constructor=a;for(var d in e)a[d]=e[d];return a};var f={length:0};d.Map=n();d.Map.extend=n;d.List=m();d.List.extend=m;d.compute=function(c,e){function b(b){if("undefined"!=typeof b)a.set(b);else return a.get()}e=e||{};var a=new (d.Map.extend({set:function(a){this.attr("val",a)},get:function(){return this.attr("val")}},e))({val:c});b.on=a.bind.bind(a);b.off=a.unbind.bind(a);b.trigger=
a.trigger.bind(a);return b};d.utils=k;window.fw=d})();
