var fw=window.fw||{},f=fw.utils||{};f.b=function(c,d){for(var b in d)"undefined"==typeof c[b]&&(c[b]=d[b])};fw.Construct=function(c,d){return fw.Construct.extend({},c,d)};fw.Construct.extend=function(c,d,b){function a(){"function"==typeof b.init&&b.init.apply(this,arguments);for(var a in b)"init"!=a&&(this[a]=b[a])}"undefined"==typeof b&&(b=d,d={});"undefined"==typeof b&&(b=c,c={});c=c||{};b=b||{};a.prototype=c;a.prototype.superclass=c;a.prototype.constructor=a;for(var e in d)a[e]=d[e];return a};
var k={length:0};function l(c,d,b,a){this.how=c;this.key=d;this.old_val=b;this.new_val=a;this.stopPropagation=!1}
function m(c,d,b){"undefined"==typeof b&&(b=d,d={});"undefined"==typeof b&&(b=c,c={});c=c||{};b=b||{};f.b(c,{attr:function(a,e){"number"==typeof a&&(a=String(a));if("undefined"==typeof a){var b={},c;for(c in this.keys)b[this.keys[c]]=this[this.keys[c]];return b}if("string"==typeof a){if("undefined"==typeof e)return this[a];b="set";0>this.keys.indexOf(a)&&(this.keys.push(a),b="add");var d=this[a];this[a]=e;this.trigger(b,a,d,e)}if("object"==typeof a)for(c in a)b="set",0>this.keys.indexOf(c)&&(this.keys.push(c),
b="add"),d=this[c],this[c]=a[c],this.trigger(b,c,d,a[c])},each:function(a){for(var e in this.keys)a.call(this,e,this[e])},removeAttr:function(a){"number"==typeof a&&(a=String(a));var e=this.keys.indexOf(a);0>e||(this.keys.splice(e,1),e=this[a],delete this[a],this.trigger("remove",a,e,void 0))},bind:function(a,e){k[this.a][a]instanceof Array||(k[this.a][a]=[]);for(var b in k[this.a][a])if(k[this.a][a][b]==e)return;k[this.a][a].push(e)},unbind:function(a,e){if(k[this.a][a]instanceof Array)if("undefined"==
typeof e)delete k[this.a][a];else for(var b in k[this.a][a])if(k[this.a][a][b]==e){k[this.a][a].splice(b,1);break}},trigger:function(a,b,c,d){var g=null;if("undefined"!=typeof k[this.a][b])for(var g=new l(a,b,c,d),h=0;h<k[this.a][b].length;h++)if(k[this.a][b][h].call(this,g),g.stopPropagation)return;if("undefined"!=typeof k[this.a][a])for(g=g||new l(a,b,c,d),h=0;h<k[this.a][a].length;h++)if(k[this.a][a][h].call(this,g),g.stopPropagation)return;if("undefined"!=typeof k[this.a].change)for(g=g||new l("change",
b,c,d),h=0;h<k[this.a].change.length&&(k[this.a].change[h].call(this,g),!g.stopPropagation);h++);}});return fw.Construct.extend(c,d,{init:function(a){a=a||{};this.keys=[];f.b(a,b);"function"==typeof b.init&&b.init.apply(this,arguments);if("object"==typeof a)for(var e in a)"init"!=e&&(this[e]=a[e],this.keys.push(e));k.length++;this.a=e="map"+k.length;k[e]={}}})}fw.Map=m();fw.Map.extend=m;
function n(c,d,b){"undefined"==typeof b&&(b=d,d={});"undefined"==typeof b&&(b=c,c={});c=c||{};b=b||[];f.b(c,{push:function(a){this.attr(this.length++,a)},pop:function(){var a=this.attr(this.length-1);this.removeAttr(this.length-1);this.length--;return a},shift:function(){var a=Array.prototype.shift.apply(this);this.trigger("remove","0",a,void 0);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);if(1<arguments.length){var b=Array.prototype.slice.call(arguments,0,arguments.length);
this.trigger("add","0",void 0,b)}else 1==arguments.length&&this.trigger("add","0",void 0,arguments[0]);return a},slice:function(a,b){arguments[0]=arguments[0]||0;arguments[1]=arguments[1]||this.length;var c=Array.prototype.slice.apply(this,arguments);return new fw.List(c)},splice:function(a,b){arguments[0]=arguments[0]||0;arguments[1]=arguments[1]||this.length;var c=Array.prototype.splice.apply(this,arguments);this.keys=[];for(var d=0;d<this.length;d++)this.keys.push(d);this.trigger("remove",a,c,
void 0);2<arguments.length&&(d=Array.prototype.slice.call(arguments,2,arguments.length),this.trigger("add",a,void 0,d));return new fw.List(c)},indexOf:function(){return Array.prototype.indexOf.apply(this,arguments)},join:function(){return Array.prototype.join.apply(this,arguments)},forEach:function(){Array.prototype.forEach.apply(this,arguments)},concat:function(){var a=Array.prototype.slice.call(this,0,this.length);return new fw.List(Array.prototype.concat.apply(a,arguments))}});return fw.Map.extend(c,
d,{init:function(a){f.b(this,b);this.length=0;if(a instanceof Array){this.length=a.length;for(var c=0;c<a.length;c++)this[c]=a[c]}else if(0<arguments.length)for(this.length=arguments.length,c=0;c<arguments.length;c++)this[c]=arguments[c]}})}fw.List=n();fw.List.extend=n;
fw.compute=function(c,d){function b(b){if("undefined"!=typeof b)a.set(b);else return a.get()}d=d||{};var a=new (fw.Map.extend({set:function(a){this.attr("val",a)},get:function(){return this.attr("val")}},d))({val:c});b.on=a.bind.bind(a);b.off=a.unbind.bind(a);b.trigger=a.trigger.bind(a);return b};fw.utils=f;window.fw=fw;
